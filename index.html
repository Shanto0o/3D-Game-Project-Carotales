<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Carotales</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>
    <style>

    @font-face {
      font-family: 'MyGameFont';
      src: url('images/Londrina.otf') format('truetype');
      font-weight: normal;
      font-style: normal;
      
    }
      html, body {
        font-family: 'MyGameFont', sans-serif;
        width: 100%;
        height: 100%;
        margin: 0;
        overflow: hidden;
        font-size: 35px;
        padding: 0;
      }
      body{background: url('./images/carotales.png') no-repeat center center fixed;
      background-color: #000;     
      background-size: contain;}
      #renderCanvas {
        width: 100%;
        height: 100%;
        z-index: 0;
        touch-action: none;
      }
      #timerDisplay {
        display : none
      }
      #menu {
  position: absolute;
  left: 20%;            /* d√©place tout le menu √† gauche */
  top: 35%;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  z-index: 100;
}
      #shopInterface {
      position: absolute;
      inset: 0;
      z-index: 200;
      background: rgba(0, 0, 0, 0.5);
      display: none; 
      flex-direction: row;
    }
    #shopInterface.show {
  display: flex; 
}

      #shopInterface .shop-left {
        flex: 1;
        background: url('images/shop.png') no-repeat center center;
        background-size: cover;
      }

      #shopInterface .shop-right {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: flex-start;
        padding: 30px;
        overflow-y: auto;
      }
      #shopInterface.show .shop-right {
        height: 100%;
        box-sizing: border-box;
        

        padding: 10% 30px;
        
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
      }

      .shop-right .item {
        position: relative; 
        flex: 0 0 auto;
        width: 60%;
        margin: 0;
      }
      .shop-right .item img {
        transition: transform 0.2s ease;
      }
      .shop-right .item:hover img {
        transform: scale(1.1);
      }

      .shop-right .item .tooltip {
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        margin-bottom: 8px;
        padding: 6px 10px;
        background: rgba(0, 0, 0, 0.85);
        color: #fff;
        font-size: 14px;
        white-space: nowrap;
        border-radius: 4px;
        
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease;
        z-index: 10;

        
        font-size: 20px;
        line-height: 1.4;
        padding: 10px 14px;
        min-width: 120px;
        text-align: center;
        border-radius: 6px;
      }

      .shop-right .item:hover .tooltip {
        opacity: 1;
      }

      #shopInterface .item {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
      }
      #shopInterface .item img {
        width: 64px;
        height: 64px;
        margin-right: 15px;
        border-radius: 8px;
        box-shadow: 0 0 8px rgba(0,0,0,0.6);
      }
      #shopInterface .item button {
        flex: 1;
        padding: 10px 15px;
        font-size: 16px;
        cursor: pointer;
        border: none;
        border-radius: 5px;
        background: #ff8c00;
        color: #fff;
        transition: background .2s;
      }
      #shopInterface .item button:hover {
        background: #e07b00;
      }
      #scoreDisplay, #timerDisplay {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 100;
        background: rgba(0, 0, 0, 0.5);
        padding: 10px;
        border-radius: 5px;
        color: white;
      }
      #timerDisplay {
        top: 60px;
      }
      #playButton {
  width: 280px;          /* taille souhait√©e */
  margin-bottom: 16px;   /* espace sous Play */
}
    #playButton:hover { transform: scale(1.05); }
    #playButton:active {
      transform: scale(0.95);
    }  
    #skillsBar img{
      width:64px; height:64px;
      opacity:.9; border:2px solid #fff; border-radius:8px;
      box-shadow:0 0 8px rgba(0,0,0,.6);
}    
    #fishingInterface {
      display: none;
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.7);
      align-items: center; 
      justify-content: center;
      z-index: 300;
    }


    #fishingBar {
      position: relative;
      width: 50px;
      height: 300px;
      background: #444;
      border-radius: 8px;
      overflow: hidden;
    }
    #fishingRedZone {
      position: absolute;
      width: 100%;
      height: 60px; 
      top: 120px;
      background: rgba(255,0,0,0.5);
    }
    #fishingHandle {
      position: absolute;
      width: 100%;
      height: 20px;
      background: #fff;
      bottom: 0;
      border-radius: 4px;
    }

    #introInterface {
    display: none;
    position: absolute;
    inset: 0;
    background: rgba(10, 10, 30, 0.8);
    backdrop-filter: blur(5px);
    z-index: 1000;

    align-items: center;
    justify-content: center;
    padding: 20px;
    }

    #introInterface .card {
      max-width: 500px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      padding: 30px 25px;
      text-align: center;
      color: #fff;
      font-family: 'MyGameFont', sans-serif;
      animation: fadeIn 0.6s ease-out;
    }

    #introInterface .card h2 {
      margin-bottom: 15px;
      font-size: 2rem;
      text-shadow: 0 2px 6px rgba(0,0,0,0.5);
    }

    #introInterface .card p {
      line-height: 1.5;
      margin-bottom: 25px;
      font-size: 1.1rem;
    }

    #introInterface .btn-continue {
      background: linear-gradient(135deg, #ff9de2 0%, #fad0c4 100%);
      border: none;
      border-radius: 30px;
      padding: 12px 30px;
      font-size: 1.1rem;
      color: #222;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    #introInterface .btn-continue:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 6px 16px rgba(0,0,0,0.4);
    }
    #introInterface .btn-continue:active {
      transform: translateY(1px) scale(0.98);
    }

    #shopInterface #closeShopBtn {
        position: absolute;
        bottom: 20px;
        right: 20px;
        padding: 10px 15px;
        font-size: 16px;
        border: none;
        border-radius: 5px;
        background: #ff4c4c;
        color: #fff;      
        cursor: pointer;
        transition: background .2s;
        z-index: 10;
      }
      #shopInterface #closeShopBtn:hover {
        background: #e03c3c;
      }

      #loseMenu {
        display: none; 
        position: absolute;
        inset: 0; 
        background: rgba(250,240,255,0.9);
        backdrop-filter: blur(4px);
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 10000;
      }
      #shopEurosDisplay {
  width: 100%;
  text-align: right;
  margin-bottom: 20px;
  font-size: 1.2rem;
  color: white;
  text-shadow: 0 0 4px rgba(0,0,0,0.7);
}
      #loseMenu h1 {
        font-size: 4rem;
        color: #9b59b6;
        text-shadow: 0 0 20px rgba(155,89,182,0.6);
        margin-bottom: 1rem;
        font-family: 'MyGameFont', sans-serif;
      }
      #loseMenu button {
        padding: 12px 24px;
        font-size: 1.5rem;
        color: #fff;
        background: linear-gradient(135deg, #ffd1dc, #ff9ff3);
        border: none;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        cursor: pointer;
        transition: transform 0.2s;
      }
      #loseMenu button:hover {
        transform: scale(1.05);
      }
      #loseMenu button:active {
        transform: scale(0.95);
      }
      #endScreen {
  position: fixed;
  inset: 0;
  display: none;
  background: transparent;     /* <- transparent now */
  justify-content: center;
  align-items: center;
  z-index: 1000;
}
#endScreen.visible {
  display: flex;
}

/* La card garde le fond semi‚Äëopaque */
#endScreen .card {
  text-align: center;
  background: rgba(255,255,255,0.9);  /* only the card */
  padding: 40px 60px;
  border-radius: 16px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.2);
}
#endScreen .card h1 {
  font-size: 3rem;
  color: #9c27b0;
  text-shadow: 0 0 8px rgba(156,39,176,0.6);
  margin-bottom: 0.5em;
}
#endScreen .card p {
  font-size: 1.25rem;
  margin-bottom: 1.5em;
  color: #555;
}
#endScreen .card button {
  padding: 12px 24px;
  font-size: 1.1rem;
  background: linear-gradient(135deg, #ff9de2, #fad0c4);
  border: none;
  border-radius: 30px;
  cursor: pointer;
  transition: transform 0.2s;
}
#promptDiv {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  
  padding: 1.5rem 3rem;
  max-width: 80%;
  
  /* fond pastel semi-transparent avec l√©ger flou */
  background: linear-gradient(135deg,
    rgba(182, 126, 220, 0.6),
    rgba(116, 185, 255, 0.6)
  );
  backdrop-filter: blur(10px);
  
  /* bordure douce et arrondie */
  border: 2px solid rgba(255, 255, 255, 0.8);
  border-radius: 1.5rem;
  
  /* texte large, centr√© et lumineux */
  font-size: 2.5rem;
  color: #ffffff;
  text-align: center;
  text-shadow: 0 0 8px rgba(255, 255, 255, 0.9);
  
  /* ombre port√©e pour l‚Äôeffet glow */
  box-shadow: 0 0 20px rgba(182, 126, 220, 0.7),
              0 0 30px rgba(116, 185, 255, 0.5);
  
  /* une police cursive ou l√©g√®re pour l‚Äôambiance */
  font-family: 'Caveat', cursive, sans-serif;
  z-index: 1000;
  pointer-events: none; /* pour ne pas bloquer le clic */
}
#promptDiv:empty {
  display: none;
}
#endScreen .card button:hover {
  transform: translateY(-2px) scale(1.05);
}
#endScreen .card button:active {
  transform: translateY(1px) scale(0.98);
}

/* Styles pour faire ressortir le bouton ‚ÄúNiveau Suivant‚Äù */
#item-niveauSuivant img {
  /* l√©g√®re oscillation de taille sur l‚Äôic√¥ne */
  animation: pulse 1.5s ease-in-out infinite;
}

#item-niveauSuivant button {
  background: linear-gradient(45deg, #ff9f1c, #ffbf69);
  color: #fff;
  font-size: 1.25rem;
  padding: 12px 24px;
  border: 2px solid #fff;
  border-radius: 8px;
  box-shadow: 0 0 12px rgba(255, 191, 105, 0.8);
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  animation: pulse 1.5s ease-in-out infinite;
}

#item-niveauSuivant button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 16px rgba(255, 191, 105, 1);
}
/* ========== Panneau global ========== */
/* ===================== Panneau plein √©cran ===================== */
#customizePanel {
  display: none;
  position: fixed;           /* reste cal√© √† l‚Äô√©cran */
  top: 5vh;                  /* 5% du haut */
  left: 5vw;                 /* 5% du c√¥t√© gauche */
  right: 5vw;                /* 5% du c√¥t√© droit */
  bottom: 5vh;               /* 5% du bas */
  background: rgba(255, 240, 255, 0.85);
  backdrop-filter: blur(8px);
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(180, 120, 255, 0.3);
  overflow-y: auto;          /* scroll si besoin */
  padding: 20px;
  font-family: 'Caveat', cursive;
  color: #4c004c;
}

/* Titre centr√© */
#customizePanel h3 {
  margin: 0 0 16px;
  font-size: 1.8em;
  text-align: center;
}

/* Fieldsets larges */
#customizePanel fieldset {
  background: rgba(255, 255, 255, 0.6);
  border: none;
  border-radius: 10px;
  padding: 12px 16px;
  margin-bottom: 20px;
}

/* Texte de l√©gende */
#customizePanel legend {
  font-weight: bold;
  font-size: 1.2em;
  padding: 0 6px;
}

/* Boutons */
#customizePanel button {
  cursor: pointer;
  background: linear-gradient(135deg, #ff9de2 0%, #fad0c4 100%);
  border: none;
  border-radius: 8px;
  padding: 10px 24px;
  font-size: 1em;
  color: #4c004c;
  margin: 12px 8px 0 0;
  transition: transform 0.2s, box-shadow 0.2s;
}
#customizePanel button:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 6px 16px rgba(180, 120, 255, 0.6);
}

/* ========== Options + ic√¥nes ========== */
.accessory-option {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 8px;
  border-radius: 6px;
  margin-bottom: 8px;
  transition: background 0.2s;
}
.accessory-option:hover {
  background: rgba(255, 200, 255, 0.3);
}

/* Regroupe le radio et le label */
.accessory-option input {
  margin: 0;
  margin-right: 8px;
}

/* Texte de l‚Äôoption */
.accessory-option span {
  flex-grow: 1;     /* prend l‚Äôespace central */
  text-align: left;
}

/* Ic√¥nes r√©duites */
.accessory-option img {
  width: 24px;
  height: 24px;
  margin-left: 12px;
  filter: drop-shadow(0 0 3px rgba(200, 150, 255, 0.6));
  transition: transform 0.2s;
}
.accessory-option:hover img {
  transform: scale(1.1);
}

/* 1) Toujours au-dessus du menu */
#customizePanel {
  z-index: 1000;  /* > 100 de #menu */
}

/* 2) Enl√®ve les <br> sous les labels */
#customizePanel br {
  display: none;
}

/* 3) Passe chaque fieldset en grille compacte */
#customizePanel fieldset {
  display: grid;
  grid-template-columns: repeat(2, 1fr); /* 2 colonnes √©gales */
  gap: 6px 12px;                         /* petit espacement */
  padding: 8px;
}

/* 4) Fais des labels flex pour aligner radio / texte / ic√¥ne */
#customizePanel fieldset > label {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 4px;
  background: rgba(255,255,255,0.6);
  border-radius: 6px;
  cursor: pointer;
}

/* 5) Ic√¥nes vraiment petites */
#customizePanel fieldset > label img {
  width: 80px;
  height: 80px;
  margin-left: 6px;
  filter: drop-shadow(0 0 2px rgba(200,150,255,0.6));
}

/* 6) Ajuste l‚Äôespacement interne si besoin */
#customizePanel {
  padding: 12px;
}
#customizeBtn {
  width: 280px;
  height: auto;
  cursor: pointer;
  transition: transform .15s ease;
}

#customizeBtn:hover {
  transform: scale(1.05);
}
#menuActions {
  display: flex;
  gap: 10px;             /* espace entre Customize et Options */
} 
#customizeBtn,
#optionBtn {
  width: 140px;          /* moiti√© de la taille du Play par exemple */
}

#customizeBtn:active {
  transform: scale(0.95);
}

#optionBtn {
  width: 280px;
  height: auto;
  cursor: pointer;
  transition: transform .15s ease;
}

#optionBtn:hover {
  transform: scale(1.05);
}

#optionBtn:active {
  transform: scale(0.95);
}

#optionsPanel {
  display: none;                   /* reste masqu√© tant qu‚Äôon ne clique pas */
  position: fixed;                 /* plein √©cran, comme #customizePanel */
  top: 5vh;                        /* 5 % depuis le haut */
  left: 5vw;                       /* 5 % depuis la gauche */
  right: 5vw;                      /* 5 % depuis la droite */
  bottom: 5vh;                     /* 5 % depuis le bas */
  background: rgba(255, 240, 255, 0.85);   /* ton pastel semi-opaque */
  backdrop-filter: blur(8px);      /* m√™me flou que pour custom */
  border-radius: 12px;             /* arrondis g√©n√©reux */
  box-shadow: 0 8px 24px rgba(180, 120, 255, 0.3);  /* ombre color√©e */
  overflow-y: auto;                /* scroll si besoin */
  padding: 20px;                   
  font-family: 'Caveat', cursive;  /* m√™me typo que custom */
  color: #4c004c;                  /* m√™me palette violette */
  text-align: center;
  z-index: 1000;                   /* au-dessus du menu */
  flex-direction: column;          
  gap: 16px;
}

/* En-t√™te identique √† h3 de custom */
#optionsHeader {
  width: 64px;
  margin: 0 auto;
}

/* Image de commandes plus grande */
#commandsContainer {
  background: rgba(255, 255, 255, 0.6);
  padding: 12px;
  border-radius: 10px;
}
#commandsImage {
  max-width: 100%;
  display: block;
  margin: 0 auto;
}

/* Label & checkbox */
#cheatLabel {
  font-size: 1.4em;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
}
#cheatCheckbox {
  width: 24px;
  height: 24px;
}

/* Bouton Fermer styl√© comme dans customize */
#closeOptionsBtn {
  margin-top: auto;               /* pousse en bas du panneau */
  padding: 12px 24px;
  background: linear-gradient(135deg, #ff9de2, #fad0c4);
  border: none;
  border-radius: 8px;
  color: #4c004c;
  font-size: 1.1em;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(180, 120, 255, 0.3);
  transition: transform .2s, box-shadow .2s;
}
#closeOptionsBtn:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 6px 16px rgba(180, 120, 255, 0.6);
}
#closeOptionsBtn:active {
  transform: translateY(1px) scale(0.98);
}
#commandsImage {
  width: 72vw;    /* 60 % de la largeur de la fen√™tre */
  height: auto;   /* pour garder les proportions */
}
#optionBtn {
  width: 140px;          /* moiti√© de la taille du Play par exemple */
}
#previewBox {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: none;            /* cach√© par d√©faut */
  z-index: 1100;            /* au-dessus de la plupart des √©l√©ments */
  pointer-events: none;     /* pour ne pas capturer la souris */
}

#previewBox img {
  max-width: 1000px;         /* ou la taille d√©sir√©e */
  max-height: 1000px;
  border: 3px solid #4c004c;
  border-radius: 8px;
  background: white;        /* fond blanc pour bien d√©tacher l‚Äôaper√ßu */
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
}

#miniGameInterface {
  display: none;
  position: fixed;
  top: 10vh;
  left: 5vw;
  right: 5vw;
  bottom: 10vh;
  background: rgba(255, 240, 255, 0.85);
  backdrop-filter: blur(8px);
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(180, 120, 255, 0.3);
  z-index: 300;
  padding: 20px;
  font-family: 'Caveat', cursive;
  color: #4c004c;

  /* NE PAS INCLURE display:flex ici ! */
  /* display: flex;
     flex-direction: column;
     gap: 20px;
     align-items: stretch; */
  overflow: hidden;
}

#miniGameInterface .mini-left {
  /* on laisse flex:1 ou rien ici, selon si vous voulez qu‚Äôil prenne tout l‚Äôespace restant */
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-start;
}

/* Partie image, en dessous */
#miniGameInterface .mini-right {
  /* on indiquera la largeur ici, mais sans display:flex, car la flexbox sera d√©finie en JS */
  width: 100%;
  overflow: hidden;
  display: flex;           /* Si vous voulez centrer l‚Äôimage, on peut laisser le flex sur ce niveau */
  align-items: center;
  justify-content: center;
}

/* Contraintes pour l‚Äôimage afin qu‚Äôelle ne d√©passe jamais */
#miniGameInterface .mini-right img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  border-radius: 8px;
  box-shadow: 0 0 8px rgba(0,0,0,0.4);
}

/* Titre h3 ajust√© */
#miniGameInterface h3 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 1.8em;
  color: #9b59b6;
  text-shadow: 0 0 4px rgba(255,255,255,0.7);
}

/* Paragraphe explicatif */
#miniGameInterface p {
  margin: 0 0 15px 0;
  font-size: 1.1em;
}

/* Boutons Roll / Leave */
#miniGameInterface button {
  cursor: pointer;
  background: linear-gradient(135deg, #ff9de2, #fad0c4);
  border: none;
  border-radius: 8px;
  padding: 10px 20px;
  font-size: 1em;
  color: #4c004c;
  margin-right: 10px;
  margin-bottom: 10px;
  transition: transform 0.2s, box-shadow 0.2s;
}
#miniGameInterface button:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 6px 16px rgba(180, 120, 255, 0.6);
}
#miniGameInterface button:active {
  transform: translateY(1px) scale(0.98);
}

/* R√©sultat des d√©s */
#miniGameInterface #diceResult {
  margin-top: 15px;
  font-size: 1.2em;
  color: #333;
}

/* Vous pouvez affiner ces styles dans votre <style> existant */
#volumeInterface {
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
}
#musicVolumeSlider {
  -webkit-appearance: none;
  height: 6px;
  border-radius: 3px;
  background: #555;
  outline: none;
}
#musicVolumeSlider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px;
  height: 16px;
  background: #ff8c00;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 0 5px rgba(0,0,0,0.5);
}





/* Keyframes pour l‚Äôeffet ‚Äúpulse‚Äù */
@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50%      { transform: scale(1.1); }
}

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    </style>
    <script src="https://cdn.babylonjs.com/babylon.max.js"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylon.glTF2FileLoader.min.js"></script>
    <script src="https://cdn.babylonjs.com/havok/HavokPlugin.js"></script>


  <script src="https://cdn.babylonjs.com/havok/HavokPhysics_umd.js"></script>
  </head>
  <body>
    <canvas id="renderCanvas"></canvas>
    <div id="menu">
  <img id="playButton" src="images/play.png" alt="Play DreamLand">
  <div id="menuActions">
    <img id="customizeBtn" src="images/custom.png" alt="Customize DreamLand">
    <img id="optionBtn"   src="images/option.png" alt="Options DreamLand">
  </div>
</div>
    <div id="introInterface">
      <div class="card">

        <h2>Welcome to Carrotales¬†! ‚ú®</h2>
        <p>
          You play as an adventurous rabbit, your dream is to bite into the Sacred Carrot !<br>
          Pick up carrots, avoid enemies,<br>
          Fish, dice and unlock powers! <br>
          <em>Tip: take advantage of the first level to harvest a max of carrots!</em>
        </p>
        <button id="introContinue" class="btn-continue">
          Continue
        </button>
      </div>
    </div>

    <div id="previewBox">
    <img id="previewImg" src="" alt="Aper√ßu accessoire" />
  </div>

    <div id="loseMenu">
      <h1>You Lose¬†!</h1>
      <button id="retryButton">Retry</button>
    </div>

    <div id="shopInterface">
      <div class="shop-left"></div>
    
      <div class="shop-right">
        <div id="shopEurosDisplay" style="width:100%; text-align:right; margin-bottom:20px; font-size:1.2rem; color:#fff;">
  Carrots : <span id="shopEurosAmount">0</span>
</div>
        <div class="item" id="item-buyRange">
          <img src="images/buyRange.png" alt="Buy Range">
          <div class="tooltip">Add 0.2 pick up range.</div>
          <button id="buyRange">Buy Range (10 carrots)</button>
        </div>
        <div class="item" id="item-buyFreeze">
          <div class="tooltip">Freeze all the enemies for 5 seconds. Cooldown : 60s. Key : a </div>
          <img src="images/gel.png" alt="Gel Ennemis">
          <button id="buyFreeze">Freeze all enemies (carrots)</button>
        </div>
        <div class="item" id="item-buySpeed">
          <img src="images/speed.png" alt="Speed Boost">
          <div class="tooltip">You speed is multiplied by 1.4 for 10 seconds. Cooldown : 60s. Key : r </div>
          <button id="buySpeed">Speed Boost (25¬†carottes)</button>
        </div>
        <div class="item" id="item-buyDonate">
          <img src="images/buyDonate.png" alt="Donner">
          <div class="tooltip">You see a tip jar on the stand. Maybe the owner will give you a smile ! </div>
          <button id="buyDonate">Tip 10 carrots</button>
        </div>
        <div class="item" id="item-buyCarrotLover">
          <img src="images/buyCarrotLover.png" alt="Carrot Lover">
          <div class="tooltip">Gain +1 carrot everytime you pick up carrots</div>
          <button id="buyCarrotLover">Carrot Lover (15¬†carottes)</button>
        </div>
        <div class="item" id="item-buyInsurance">
          <img src="images/buyInsurance.png" alt="Assurance‚Äëvie">
          <div class="tooltip">You respawn instantly after dying in the void for 1 time during a level.</div>
          <button id="buyInsurance">Life Insurance (20 carrots)</button>
        </div>
        <div class="item" id="item-niveauSuivant">
          <img src="images/niveauSuivant.png" alt="Niveau Suivant">
          <button id="niveauSuivant">CLICK HERE to go to the Next Level</button>
        </div>
      </div>
      <button id="closeShopBtn">Close Shop</button>
    </div>
    
    
    <div id="timerDisplay">Time Left: <span id="timer"></span></div>

      <div id="timerDisplay"
           style="display:none; position:absolute; top:60px; right:10px; z-index:100;
                  background:rgba(0,0,0,0.5); padding:10px; border-radius:5px; color:white;font-family: 'MyGameFont', sans-serif;font-size:30px;">
        Time Left: <span id="timer">30</span>
      </div>
    <div id="interactPrompt"
     style="
       position: absolute;
       bottom: 80px;
       left: 50%;
       transform: translateX(-50%);
       background: rgba(0,0,0,0.7);
       color: white;
       padding: 5px 10px;
       border-radius: 5px;
       font-size: 18px;
       display: none;
       z-index: 100;font-family: 'MyGameFont', sans-serif;font-size:30px;
     ">
  E : interact
</div>

  <div id="customizePanel"  >
    <h3>Personnalisation</h3>

    <!-- Cat√©gorie T√™te -->
    <fieldset>
      <legend>T√™te</legend>
      <label><input type="radio" name="Tete" value="none" checked> <span>Aucun</span><img src="images/Aucun.png" alt="Aucun"></label><br>
      <label><input type="radio" name="Tete" value="Couronne"> <span>Couronne</span><img src="images/Couronne.png" alt="Couronne"></label><br>
      <label><input type="radio" name="Tete" value="Anneau"> <span>Anneau</span><img src="images/Anneau.png" alt="Anneau"></label><br>
      <label><input type="radio" name="Tete" value="Perruque"> <span>Perruque</span><img src="images/Perruque.png" alt="Perruque"></label><br>
    </fieldset>

    <!-- Cat√©gorie Visage -->
    <fieldset>
      <legend>Visage</legend>
      <label><input type="radio" name="Visage" value="none" checked> <span>Aucun</span><img src="images/Aucun.png" alt="Aucun"></label><br>
      <label><input type="radio" name="Visage" value="Nez"> <span>Nez</span><img src="images/Nez.png" alt="Nez"></label><br>
    </fieldset>

    <!-- Cat√©gorie yeux -->
    <fieldset>
      <legend>Yeux</legend>
      <label><input type="radio" name="Yeux" value="none" checked> <span>Aucun</span><img src="images/Aucun.png" alt="Aucun"></label><br>
      <label><input type="radio" name="Yeux" value="Lunettes"> <span>Lunettes</span><img src="images/Lunettes.png" alt="Lunettes"></label><br>
      <label><input type="radio" name="Yeux" value="LunCarottes"> <span>Lunettes Carottes</span><img src="images/LunCarottes.png" alt="LunCarottes"></label><br>
    </fieldset>

    <!-- Cat√©gorie Dos -->
    <fieldset>
      <legend>Dos</legend>
      <label><input type="radio" name="Dos" value="none" checked> <span>Aucun</span><img src="images/Aucun.png" alt="Aucun"></label><br>
      <label><input type="radio" name="Dos" value="Aile"> <span>Aile</span><img src="images/Aile.png" alt="Aile"></label><br>
      <label><input type="radio" name="Dos" value="SacCarotte"> <span>Sac Carotte</span><img src="images/SacCarotte.png" alt="SacCarotte"></label><br>
    </fieldset>

    <!-- Cat√©gorie Pieds -->
    <fieldset>
      <legend>Pieds</legend>
      <label><input type="radio" name="Pieds" value="none" checked> <span>Aucun</span><img src="images/Aucun.png" alt="Aucun"></label><br>
      <label><input type="radio" name="Pieds" value="Chaussure"> <span>Chaussure</span><img src="images/Chaussure.png" alt="Chaussure"></label><br>
    </fieldset>

    <fieldset>
      <legend>Oreilles</legend>
      <label><input type="radio" name="Oreilles" value="none" checked> <span>Aucun</span><img src="images/Aucun.png" alt="Aucun"></label><br>
      <label><input type="radio" name="Oreilles" value="guirCar"> <span>Guirlandes Carottes</span><img src="images/guirCar.png" alt="guirCar"></label><br>
      <label><input type="radio" name="Oreilles" value="guirNoel"> <span>Guirlandes No√´l</span><img src="images/guirNoel.png" alt="guirNoel"></label><br>
      <label><input type="radio" name="Oreilles" value="bouclesOreilles"> <span>Boucles d'Oreilles</span><img src="images/bouclesOreilles.png" alt="bouclesOreilles"></label><br>
    </fieldset>




    <!-- Boutons Fermer et Appliquer -->
    <div style="margin-top:15px;">
      <button id="closeCustomizeBtn"
              style="margin-right:10px; padding:8px 16px;">Close</button>
      <button id="applyCustomizeBtn"
              style="padding:8px 16px; background:#2196f3; color:#fff; border:none;">Apply changes</button>
    </div>
  </div>


  <!-- Options Panel -->
<div id="optionsPanel">
  <!-- En-t√™te : ton ic√¥ne option.png -->

  <!-- Image explicative des commandes -->
  <div id="commandsContainer">
    <img src="images/commands.png" alt="Commandes DreamLand" id="commandsImage">
  </div>

  <!-- Cheat Mode checkbox -->
  <label id="cheatLabel">
    <input type="checkbox" id="cheatCheckbox">
    Cheat Mode (fly)
  </label>

  <!-- Bouton fermer -->
  <button id="closeOptionsBtn">Close</button>
</div>

<div id="eurosDisplay"
     style="display:none; position:absolute; top:10px; left:10px; z-index:100;
            background:rgba(0,0,0,0.5); padding:5px 10px; border-radius:5px; color:white;font-family: 'MyGameFont', sans-serif;font-size:30px;">
  Carrots : <span id="eurosAmount">0</span>
</div>
<div id="miniGameInterface">
  <div class="mini-left">
  <h3>Dice game ! ( 10 carrots per attempt)</h3>
  <p>Pay 10 carrots to roll 2 dice¬†:</p>
  <div>
  <button id="playDiceBtn">Roll the dice</button>
  <button id="closeMiniGameBtn" style="margin-left:10px;">Leave</button>
  </div>
  <div id="diceResult" style="margin-top:15px;"></div>
  </div>

  <div class="mini-right">
    <img src="images/gain.png" alt="Tableau des gains">
  </div>
</div>
<div id="deathScreen"
     style="display:none; position:absolute; top:50%; left:50%;
            transform:translate(-50%,-50%); background:rgba(0,0,0,.8);
            color:#fff; padding:25px 40px; border-radius:8px;
            font-size:28px; text-align:center; z-index:400;font-family: 'MyGameFont', sans-serif;font-size:30px;">
  You are dead.<br>
  Respawning in <span id="respawnTimer">3</span>‚Ä¶
</div>
<div id="toast"
     style="display:none; position:absolute; top:20%; left:50%;
            transform:translateX(-50%); padding:12px 24px;
            background:rgba(0,0,0,.8); color:#fff; font-size:22px;
            border-radius:8px; z-index:500; pointer-events:none;">
</div>
<div id="skillsBar"
     style="display:none; position:absolute; bottom:10px; right:10px;
            z-index:150; gap:8px; height:70px; display:flex; align-items:end">
</div>

<div id="fishingInterface"
     style="display:none;
            position:absolute;
            inset:0;
            background:rgba(0,0,0,0.7);
            align-items:center;
            justify-content:center;
            gap:40px;
            z-index:300;">

  <div id="fishingInstructions"
       style="width:300px;
              color:white;
              padding:20px;
              background:rgba(0,0,0,0.5);
              border-radius:8px;
              text-align:left;font-family: 'MyGameFont', sans-serif;font-size:30px;">
    <h3 style="margin-top:0;">How to Fish</h3>
    <p>Press F to move your bobber !</p>
    <p>To catch your prize, you have to keep the bobber in the red area.</p>
  </div>

  <div id="fishingBar"
       style="position:relative;
              width:50px;
              height:300px;
              background:#444;
              border-radius:8px;
              overflow:hidden;">
    <div id="fishingRedZone"
         style="position:absolute;
                width:100%;
                height:100px;
                top:100px;
                background:rgba(255,0,0,0.5);"></div>
    <div id="fishingHandle"
         style="position:absolute;
                width:100%;
                height:20px;
                background:#fff;
                bottom:0;
                border-radius:4px;
                transition:bottom 0.1s linear;"></div>
  </div>

  
  <div id="fishingTimer"
       style="color:white;
              text-align:center;
              font-size:16px;
              line-height:1.4;">
    <div>Red Zone Timer :</div>
    <div id="fishingTimerValue"
         style="margin-top:8px;
                padding:8px 12px;
                background:rgba(0,0,0,0.5);
                border:1px solid white;
                border-radius:4px;
                min-width:100px;font-family: 'MyGameFont', sans-serif;font-size:30px;">
      5¬†sec remaining
    </div>
  </div>

  <div id="endScreen">
    <div class="card">
      <h1>You finished the game!</h1>
      <p>Congratulations, brave rabbit! üê∞ü•ï‚ú®</p>
      <button id="restartButton">Play Again</button>
    </div>
  </div>

  <button id="leaveFishingBtn"
          style="padding:10px 20px; font-size:16px; cursor:pointer; border:none; border-radius:5px; background:#ff8c00; color:#fff;font-family: 'MyGameFont', sans-serif;font-size:30px;">
    Leave
  </button>

</div>

<!-- Prompt d‚Äôinteraction ‚ÄúE : Interagir‚Äù -->
<div id="interactPrompt"
     style="position:absolute; bottom:80px; left:50%; transform:translateX(-50%);
            background:rgba(0,0,0,0.7); color:white; padding:5px 10px;
            border-radius:5px; font-size:18px; display:none; z-index:100;font-family: 'MyGameFont', sans-serif;font-size:30px;">
  E : interagir
</div>

<!-- Bulles de dialogue et bouton de qu√™te -->
<div id="dialogueBox" style="display:none; position:absolute;
     bottom:100px; left:50%; transform:translateX(-50%);
     background:rgba(0,0,0,0.8); color:white; padding:20px;
     border-radius:8px; max-width:300px; text-align:center; z-index:200;">
  <div id="dialogueText"></div>
  <button id="nextDialogBtn" style="margin-top:10px;font-family: 'MyGameFont', sans-serif;font-size:30px;">Next</button>
  <button id="acceptQuestBtn" style="margin-top:10px; display:none;font-family: 'MyGameFont', sans-serif;font-size:30px;">Accept quest</button>
</div>

<!-- Livre de qu√™tes (touche P) -->
<div id="questBook"
     style="display:none; position:absolute; top:50px; right:50px;
            width:300px; height:400px; overflow-y:auto;
            background:rgba(255,255,255,0.9); color:black;
            padding:15px; border-radius:8px; z-index:200;font-family: 'MyGameFont', sans-serif;font-size:30px;">
  <h3>Quests in progress</h3>
  <ul id="questList" style="list-style:none; padding:0;"></ul>
</div>

<div id="questBookIcon"
     style="display:none;
            position:absolute;
            top:110px;            /* m√™me top que #timerDisplay */
            right:10px;          /* align√© √† droite */
            z-index:110;">
  <img src="images/questbook.png"
       alt="Quest Book"
       style="width:96px; height:96px;" />
</div>

<!-- Interface Volume (HTML complet avec deux sliders) -->
<div id="volumeInterface" style="
     display: none;
     position: absolute;
     top: 50%;
     left: 50%;
     transform: translate(-50%, -50%);
     background: rgba(0, 0, 0, 0.8);
     padding: 20px 30px;
     border-radius: 8px;
     color: white;
     text-align: center;
     z-index: 1000;
     font-family: 'MyGameFont', sans-serif;
     font-size: 24px;
">
  <!-- Slider Musique -->
  <label for="musicVolumeSlider" style="display: block; margin-bottom: 20px;">
    Volume Musique :
    <input type="range"
       id="musicVolumeSlider"
       min="0"
       max="0.5"
       step="0.01"
       value="0.25"
       style="width: 250px; margin-left: 10px;" />
  </label>

  <!-- Slider Effets -->
  <label for="effectVolumeSlider" style="display: block; margin-bottom: 20px;">
    Volume Effets :
    <input type="range"
       id="effectVolumeSlider"
       min="0"
       max="2"
       step="0.01"
       style="width: 250px; margin-left: 10px;" />
  </label>

  <!-- Bouton Fermer -->
  <button id="closeVolumeBtn" style="
    margin-top: 10px;
    padding: 8px 16px;
    font-size: 18px;
    background: #ff8c00;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  ">
    Fermer
  </button>
</div>
<div id="promptDiv" style="position:absolute; top:10px; left:50%; transform:translateX(-50%); color:white; font-family:sans-serif;"></div>



<!-- 1) On cr√©e un objet Audio pour le son de menu -->
<script>
  const menuClickAudio = new Audio("images/menuclick.wav");
  menuClickAudio.volume = 0.5;
  menuClickAudio.preload = "auto";

  // 2) On cr√©e un objet Audio pour le son de s√©lection dans le customizePanel
  const selectAudio = new Audio("images/menuclick.mp3");
  selectAudio.volume = 0.5;
  selectAudio.preload = "auto";
</script>

<script>
  window.addEventListener("DOMContentLoaded", () => {
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Sons de Menu ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const menuButtons = [
      "playButton",
      "optionBtn",
      "customizeBtn",
      "closeCustomizeBtn",
      "applyCustomizeBtn",
      "closeOptionsBtn"
    ];

    menuButtons.forEach(id => {
      const btn = document.getElementById(id);
      if (btn) {
        btn.addEventListener("click", () => {
          menuClickAudio.currentTime = 0;
          menuClickAudio.play().catch(err => {
            console.warn("Impossible de jouer menuclick.mp3 : ", err);
          });

          if (id === "playButton") {
            console.log("Bouton Jouer cliqu√© ‚Äî affichage de l'intro");
            document.getElementById("menu").style.display = "none";
            document.getElementById("introInterface").style.display = "flex";
          }
          // Les autres boutons conservent leur logique existante‚Ä¶
        });
      }
    });

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Son de S√©lection (customizePanel) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // On cible tous les <input type="radio"> √† l‚Äôint√©rieur de #customizePanel
    const radios = document.querySelectorAll("#customizePanel input[type='radio']");
    radios.forEach(radio => {
      radio.addEventListener("change", () => {
        // D√®s qu‚Äôun radio change (clic sur une option), on joue selectAudio
        selectAudio.currentTime = 0;
        selectAudio.play().catch(err => {
          console.warn("Impossible de jouer select.mp3 : ", err);
        });
      });
    });

    // Optionnel : si vous voulez aussi jouer le son au clic sur le <label> lui-m√™me
    // (au cas o√π vous cliquez sur l‚Äôimage ou le texte, pas directement sur l‚Äôinput),
    // on peut binder sur tous les <label> de #customizePanel :
    const labels = document.querySelectorAll("#customizePanel label");
    labels.forEach(lbl => {
      lbl.addEventListener("click", () => {
        // On donne un petit d√©lai pour laisser le change sur le radio se d√©clencher en premier,
        // mais si le change n'a pas encore eu lieu, on joue de toute fa√ßon.
        setTimeout(() => {
          selectAudio.currentTime = 0;
          selectAudio.play().catch(err => {
            console.warn("Impossible de jouer select.mp3 : ", err);
          });
        }, 10);
      });
    });
  });
</script>

    <script type="module" src="js/main.js"></script>
    <script src="js/NPC.js"></script>
  </body>
</html>
